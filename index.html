<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥‡é—»ç”µå° Â· Daily Weird</title>
    <style>
        /* å¼•å…¥é…·ç‚«å­—ä½“ */
        @import url('https://fonts.googleapis.com/css2?family=Zcool+KuaiLe&family=Noto+Sans+SC:wght@400;700&display=swap');

        :root {
            --bg-color: #050505;
            --card-bg: rgba(255, 255, 255, 0.05);
            --accent: #d946ef; /* éœ“è™¹ç´« */
            --text-main: #ffffff;
        }

        body {
            background-color: var(--bg-color);
            font-family: 'Noto Sans SC', sans-serif;
            color: var(--text-main);
            margin: 0; padding: 0;
            height: 100vh; overflow: hidden; display: flex; flex-direction: column;
        }

        /* é¡¶éƒ¨å…‰æ•ˆ */
        .weird-light {
            position: fixed; top: -20%; left: 20%; width: 80%; height: 60%;
            background: radial-gradient(circle, rgba(217, 70, 239, 0.2), transparent 60%);
            filter: blur(80px); z-index: -1;
        }

        header {
            padding: 20px; text-align: center; backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        h1 { 
            font-family: 'Zcool KuaiLe', cursive;
            font-size: 28px; color: var(--accent); margin: 10px 0;
        }

        .date-badge { font-size: 12px; color: #666; letter-spacing: 2px; }

        /* æ’­æ”¾å™¨ */
        .player-box {
            background: rgba(255,255,255,0.05); border-radius: 20px; padding: 15px;
            margin: 0 auto 10px; max-width: 600px; width: 90%;
            border: 1px solid rgba(217, 70, 239, 0.3);
            text-align: center;
        }

        .btn-play {
            width: 60px; height: 60px; border-radius: 50%;
            background: var(--accent); border: none; color: #fff;
            font-size: 24px; cursor: pointer; 
            box-shadow: 0 0 20px var(--accent); transition: 0.2s;
        }
        .btn-play:hover { transform: scale(1.05); }
        
        /* ç®€å•çš„è·³åŠ¨æ³¢å½¢ */
        .bars { display: flex; justify-content: center; gap: 3px; height: 30px; margin-bottom: 10px; align-items: flex-end; }
        .bar { width: 4px; background: var(--accent); height: 5px; transition: 0.1s; }

        /* æ–°é—»åˆ—è¡¨ */
        main { flex: 1; overflow-y: auto; padding: 20px; max-width: 800px; margin: 0 auto; width: 100%; }
        
        .news-card {
            background: var(--card-bg); padding: 15px; margin-bottom: 15px; 
            border-radius: 8px; border-left: 4px solid #555;
        }
        .news-card.active { border-left-color: var(--accent); background: rgba(217, 70, 239, 0.1); }
        
        .tag { background: #333; font-size: 12px; padding: 2px 6px; border-radius: 4px; color: #aaa; margin-right: 5px;}
        .title { font-size: 16px; font-weight: bold; display: block; margin-top: 5px;}
        .summary { font-size: 14px; color: #aaa; margin-top: 5px; line-height: 1.5; }

    </style>
</head>
<body>

<div class="weird-light"></div>

<header>
    <div class="date-badge" id="dateDisplay">LOADING...</div>
    <h1>ğŸ‘» å¥‡é—»ç”µå°</h1>
    
    <div class="player-box">
        <div class="bars" id="viz">
            </div>
        <button class="btn-play" id="playBtn">â–¶</button>
    </div>
</header>

<main id="newsContainer">
    <div style="text-align:center; color:#666; margin-top:50px;">æ­£åœ¨å¯»æ‰¾ä»Šæ—¥å¥‡é—»...</div>
</main>

<audio id="audioPlayer" src="daily_radio.mp3"></audio>

<script>
    // 1. åˆå§‹åŒ–æ³¢å½¢æ¡
    const viz = document.getElementById('viz');
    for(let i=0; i<15; i++) {
        let b = document.createElement('div');
        b.className = 'bar';
        viz.appendChild(b);
    }

    // 2. è¯»å– JSON æ•°æ®
    fetch('news_data.json')
        .then(res => res.json())
        .then(data => {
            document.getElementById('dateDisplay').innerText = data.date;
            const container = document.getElementById('newsContainer');
            container.innerHTML = ''; // æ¸…ç©º Loading
            
            data.news.forEach((item, idx) => {
                let div = document.createElement('div');
                div.className = 'news-card';
                div.id = 'card-' + idx;
                div.innerHTML = `
                    <span class="tag">${item.tag}</span>
                    <span class="title">${item.title}</span>
                    <div class="summary">${item.summary}</div>
                `;
                container.appendChild(div);
            });
        })
        .catch(err => console.log("è¿˜æ²¡æœ‰ç”Ÿæˆæ•°æ®ï¼Œè¯·è¿è¡Œ Python è„šæœ¬"));

    // 3. æ’­æ”¾æ§åˆ¶
    const audio = document.getElementById('audioPlayer');
    const playBtn = document.getElementById('playBtn');
    const bars = document.querySelectorAll('.bar');
    let timer;

    playBtn.onclick = () => {
        if (audio.paused) {
            audio.play().catch(e => alert("è¯·å…ˆè¿è¡Œ Python è„šæœ¬ç”Ÿæˆ daily_radio.mp3 æ–‡ä»¶ï¼"));
            playBtn.innerText = "II";
            // æ³¢å½¢åŠ¨ç”»
            timer = setInterval(() => {
                bars.forEach(b => b.style.height = Math.random() * 25 + 5 + 'px');
            }, 100);
        } else {
            audio.pause();
            playBtn.innerText = "â–¶";
            clearInterval(timer);
            bars.forEach(b => b.style.height = '5px');
        }
    };

    audio.onended = () => {
        playBtn.innerText = "â–¶";
        clearInterval(timer);
    };
</script>
</body>
</html>